# 智慧图书馆管理系统 - 项目答辩报告

## 一、项目概述

### 1.1 项目名称
**智慧图书馆管理系统 (Smart Library Management System)**

### 1.2 项目简介
本项目是一个基于 B/S 架构的现代化图书馆管理系统，采用前后端分离的开发模式，实现了图书管理、用户管理、借阅管理等核心功能。系统分为**管理员后台**和**用户前台**两个独立界面，满足不同角色的使用需求。

### 1.3 技术栈总览

| 层次 | 技术选型 |
|------|---------|
| 后端框架 | Spring Boot 3.2.1 |
| 安全框架 | Spring Security + JWT |
| 持久层 | Spring Data JPA + Hibernate |
| 数据库 | MySQL 8.0 |
| 前端框架 | Vue 3 + Vue Router + Pinia |
| UI组件库 | Element Plus |
| CSS框架 | Tailwind CSS |
| 构建工具 | Maven |

---

## 二、系统架构设计

### 2.1 整体架构图

```
┌─────────────────────────────────────────────────────────────────┐
│                        前端层 (Frontend)                         │
├──────────────────────────┬──────────────────────────────────────┤
│     admin.html           │           user.html                  │
│   (管理员后台)            │         (用户前台)                    │
│  Vue 3 + Element Plus    │    Vue 3 + Element Plus              │
└──────────────────────────┴──────────────────────────────────────┘
                              │ HTTP/HTTPS (RESTful API)
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                      后端层 (Backend)                            │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────────┐  │
│  │ Controller  │──│   Service   │──│      Repository         │  │
│  │   控制层     │  │   业务层    │  │       数据访问层         │  │
│  └─────────────┘  └─────────────┘  └─────────────────────────┘  │
│         │                │                    │                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │              Security Layer (安全层)                     │    │
│  │         JWT Token + Spring Security                     │    │
│  └─────────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────┘
                              │ JPA/Hibernate
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                      数据层 (Database)                           │
│                        MySQL 8.0                                │
│    ┌────────┐ ┌────────┐ ┌──────────┐ ┌────────────────┐       │
│    │  user  │ │  book  │ │ category │ │ borrow_record  │       │
│    └────────┘ └────────┘ └──────────┘ └────────────────┘       │
└─────────────────────────────────────────────────────────────────┘
```

### 2.2 项目目录结构

```
项目根目录/
├── admin.html                    # 管理员后台前端
├── user.html                     # 用户前台前端
└── library-management/           # 后端Spring Boot项目
    ├── pom.xml                   # Maven配置文件
    └── src/main/
        ├── java/com/library/
        │   ├── LibraryApplication.java    # 启动类
        │   ├── controller/                # 控制层
        │   │   ├── AuthController.java
        │   │   ├── BookController.java
        │   │   ├── BorrowController.java
        │   │   ├── CategoryController.java
        │   │   ├── UserController.java
        │   │   ├── FavoriteController.java   # 收藏功能
        │   │   ├── StatisticsController.java # 统计功能
        │   │   └── FileController.java       # 文件上传
        │   ├── service/                   # 业务层
        │   ├── repository/                # 数据访问层
        │   ├── entity/                    # 实体类
        │   │   ├── User.java
        │   │   ├── Book.java
        │   │   ├── Category.java
        │   │   ├── BorrowRecord.java
        │   │   ├── Favorite.java             # 收藏实体
        │   │   └── BaseEntity.java
        │   ├── dto/                       # 数据传输对象
        │   ├── security/                  # 安全模块
        │   ├── config/                    # 配置类
        │   ├── common/                    # 公共组件
        │   └── exception/                 # 异常处理
        └── resources/
            ├── application.yml            # 配置文件
            └── schema.sql                 # 数据库脚本
```

---

## 三、后端详细设计

### 3.1 实体层设计 (Entity Layer)

#### 3.1.1 用户实体 (User)
**文件位置**: `entity/User.java`

```java
核心字段：
- id: Long          // 用户ID（主键）
- username: String  // 用户名（唯一）
- password: String  // 密码（BCrypt加密）
- realName: String  // 真实姓名
- email: String     // 邮箱
- phone: String     // 手机号
- role: Role        // 角色（ADMIN/USER）
- status: Integer   // 状态（1正常/0禁用）
```

**设计说明**：
- 使用枚举类型 `Role` 区分管理员和普通用户
- 密码存储采用 BCrypt 加密算法，保证安全性
- `status` 字段支持账户启用/禁用功能

#### 3.1.2 图书实体 (Book)
**文件位置**: `entity/Book.java`

```java
核心字段：
- id: Long              // 图书ID
- isbn: String          // ISBN号（唯一）
- title: String         // 书名
- author: String        // 作者
- publisher: String     // 出版社
- publishDate: LocalDate // 出版日期
- category: Category    // 所属分类（多对一）
- price: BigDecimal     // 价格
- totalCount: Integer   // 总库存
- availableCount: Integer // 可借数量
- description: String   // 简介
- coverUrl: String      // 封面URL
- location: String      // 馆藏位置
- status: Integer       // 状态
```

**设计说明**：
- `totalCount` 和 `availableCount` 分离设计，支持库存精确管理
- 与 `Category` 建立多对一关联，支持分类管理
- `isAvailable()` 方法封装可借判断逻辑

#### 3.1.3 借阅记录实体 (BorrowRecord)
**文件位置**: `entity/BorrowRecord.java`

```java
核心字段：
- id: Long                 // 记录ID
- user: User               // 借阅用户（多对一）
- book: Book               // 借阅图书（多对一）
- borrowDate: LocalDateTime // 借阅日期
- dueDate: LocalDateTime   // 应还日期
- returnDate: LocalDateTime // 实际归还日期
- status: Status           // 状态（借阅中/已归还/逾期）
- remark: String           // 备注
```

**状态枚举设计**：
```java
enum Status {
    BORROWING(0),  // 借阅中
    RETURNED(1),   // 已归还
    OVERDUE(2)     // 逾期
}
```

#### 3.1.4 分类实体 (Category)
**文件位置**: `entity/Category.java`

- 支持树形结构（父子分类）
- 通过 `parentId` 实现多级分类

#### 3.1.5 收藏实体 (Favorite)
**文件位置**: `entity/Favorite.java`

```java
核心字段：
- id: Long            // 收藏ID（主键）
- user: User          // 收藏用户（多对一）
- book: Book          // 收藏图书（多对一）
- remark: String      // 收藏备注
- createdAt: DateTime // 收藏时间
```

**设计说明**：
- 使用联合唯一约束 `(user_id, book_id)` 防止重复收藏
- 支持添加收藏备注，便于用户分类管理
- 继承 `BaseEntity` 自动维护创建/更新时间

### 3.2 控制层设计 (Controller Layer)

#### 3.2.1 认证控制器 (AuthController)
**文件位置**: `controller/AuthController.java`

| 接口 | 方法 | 路径 | 功能 | 权限 |
|------|------|------|------|------|
| 登录 | POST | /api/auth/login | 用户登录获取Token | 公开 |
| 注册 | POST | /api/auth/register | 新用户注册 | 公开 |
| 获取当前用户 | GET | /api/auth/me | 获取登录用户信息 | 登录用户 |

#### 3.2.2 图书控制器 (BookController)
**文件位置**: `controller/BookController.java`

| 接口 | 方法 | 路径 | 功能 | 权限 |
|------|------|------|------|------|
| 创建图书 | POST | /api/books | 新增图书 | 管理员 |
| 更新图书 | PUT | /api/books/{id} | 修改图书信息 | 管理员 |
| 删除图书 | DELETE | /api/books/{id} | 删除图书 | 管理员 |
| 查询图书 | GET | /api/books/{id} | 获取单本图书详情 | 公开 |
| 图书列表 | GET | /api/books | 分页查询图书 | 公开 |

#### 3.2.3 借阅控制器 (BorrowController)
**文件位置**: `controller/BorrowController.java`

| 接口 | 方法 | 路径 | 功能 | 权限 |
|------|------|------|------|------|
| 借书 | POST | /api/borrows | 借阅图书 | 登录用户 |
| 还书 | POST | /api/borrows/{id}/return | 归还图书 | 本人/管理员 |
| 查询记录 | GET | /api/borrows/{id} | 查询借阅详情 | 登录用户 |
| 全部记录 | GET | /api/borrows | 所有借阅记录 | 管理员 |
| 我的记录 | GET | /api/borrows/my | 当前用户借阅记录 | 登录用户 |

#### 3.2.4 收藏控制器 (FavoriteController)
**文件位置**: `controller/FavoriteController.java`

| 接口 | 方法 | 路径 | 功能 | 权限 |
|------|------|------|------|------|
| 添加收藏 | POST | /api/favorites/{bookId} | 收藏图书（可附备注） | 登录用户 |
| 取消收藏 | DELETE | /api/favorites/{bookId} | 取消收藏 | 登录用户 |
| 我的收藏 | GET | /api/favorites | 分页查询我的收藏列表 | 登录用户 |
| 检查收藏 | GET | /api/favorites/check/{bookId} | 检查是否已收藏 | 登录用户 |
| 收藏数量 | GET | /api/favorites/count/{bookId} | 获取图书收藏人数 | 登录用户 |

#### 3.2.5 统计控制器 (StatisticsController)
**文件位置**: `controller/StatisticsController.java`

| 接口 | 方法 | 路径 | 功能 | 权限 |
|------|------|------|------|------|
| 统计数据 | GET | /api/statistics | 获取系统统计数据 | 管理员 |
| 仪表盘 | GET | /api/statistics/dashboard | 获取仪表盘完整数据 | 管理员 |

**统计数据包含**：
- 基础统计：图书总数、库存总量、用户总数、借阅总数
- 借阅统计：当前借出、逾期数量、今日借阅、今日归还
- 图表数据：借阅趋势（近7天）、分类统计、热门图书TOP10、活跃用户TOP10

#### 3.2.6 文件控制器 (FileController)
**文件位置**: `controller/FileController.java`

| 接口 | 方法 | 路径 | 功能 | 权限 |
|------|------|------|------|------|
| 上传文件 | POST | /api/files/upload | 上传图书封面图片 | 登录用户 |

**上传限制**：
- 文件类型：仅支持图片格式（image/*）
- 文件大小：最大 5MB
- 文件命名：UUID + 原始扩展名，避免文件名冲突
- 存储路径：`uploads/covers/` 目录

### 3.3 业务层设计 (Service Layer)

#### 3.3.1 借阅服务核心逻辑 (BorrowServiceImpl)
**文件位置**: `service/impl/BorrowServiceImpl.java`

**借书业务流程**：
```
1. 获取当前登录用户
2. 检查借阅数量限制（最大5本）
3. 验证图书存在且可借
4. 检查是否已借阅该书（防止重复借阅）
5. 减少图书可借数量
6. 创建借阅记录
7. 返回借阅信息
```

**还书业务流程**：
```
1. 查询借阅记录
2. 验证权限（本人或管理员）
3. 检查是否已归还
4. 更新借阅记录状态
5. 恢复图书可借数量
6. 返回更新后的记录
```

**定时任务**：
- 每天凌晨1点自动检查逾期记录
- 使用 `@Scheduled(cron = "0 0 1 * * ?")` 实现

### 3.4 安全模块设计 (Security Module)

#### 3.4.1 JWT Token 提供者 (JwtTokenProvider)
**文件位置**: `security/JwtTokenProvider.java`

**核心功能**：
- `generateToken()`: 生成 JWT Token
- `getUsernameFromToken()`: 从 Token 解析用户名
- `validateToken()`: 验证 Token 有效性

**Token 配置**：
- 加密算法：HMAC-SHA512
- 有效期：24小时（86400000毫秒）
- 密钥长度：256位以上

#### 3.4.2 安全配置 (SecurityConfig)
**文件位置**: `config/SecurityConfig.java`

**安全策略**：
```java
// 公开接口
- /api/auth/**          → 登录注册无需认证
- GET /api/books/**     → 图书查询公开
- GET /api/categories/** → 分类查询公开
- /uploads/**           → 静态资源公开

// 管理员接口
- POST/PUT/DELETE /api/books/** → 需要 ADMIN 角色
- /api/users/**                 → 需要 ADMIN 角色

// 其他接口
- 需要登录认证
```

**密码加密**：
- 使用 BCryptPasswordEncoder
- 自动加盐，防止彩虹表攻击

### 3.5 数据访问层 (Repository Layer)

使用 Spring Data JPA，主要 Repository：

| Repository | 实体 | 主要方法 |
|------------|------|---------|
| UserRepository | User | findByUsername() |
| BookRepository | Book | findByTitleContaining(), findByCategoryId() |
| BorrowRecordRepository | BorrowRecord | findActiveBorrow(), countActiveBorrowsByUserId() |
| CategoryRepository | Category | findByParentId() |

---

## 四、前端详细设计

### 4.1 用户前台 (user.html)

#### 4.1.1 技术架构
```
Vue 3 (Composition API)
    ├── Vue Router 4    → 路由管理
    ├── Pinia          → 状态管理
    ├── Element Plus   → UI组件
    └── Tailwind CSS   → 样式框架
```

#### 4.1.2 页面模块

| 模块 | 路由 | 功能描述 |
|------|------|---------|
| 登录页 | /login | 用户登录、注册入口 |
| 首页 | /store | 图书展示、分类筛选、搜索 |
| 书架 | /shelf | 个人借阅记录、归还操作 |
| 图书集合 | /collection | 按条件筛选图书列表 |
| 读者社区 | /community | 书评发布、互动点赞 |

#### 4.1.3 核心组件

**1. BookDetailModal - 图书详情弹窗**
```javascript
功能：
- 展示图书封面、评分、简介
- 显示库存状态
- 借阅按钮（库存>0时可点击）
```

**2. StoreHome - 首页组件**
```javascript
功能：
- 轮播图 Banner 展示
- 分类标签筛选
- 搜索框实时搜索
- 每日热榜侧边栏
- 图书卡片网格布局
```

**3. StoreShelf - 我的书架**
```javascript
功能：
- 展示个人借阅列表
- 借阅状态标签（借阅中/已归还）
- 归还按钮操作
```

#### 4.1.4 状态管理 (Pinia Store)

```javascript
useUserStore = {
    token: '',           // JWT Token
    userInfo: {},        // 用户信息
    login(data) {},      // 登录方法
    logout() {}          // 登出方法
}
```

#### 4.1.5 HTTP 请求封装

```javascript
const http = {
    getToken(),                    // 获取本地Token
    request(url, options),         // 通用请求方法
    get(url, params),              // GET请求
    post(url, data),               // POST请求
    put(url, data),                // PUT请求
    delete(url)                    // DELETE请求
}
```

**请求拦截**：
- 自动添加 `Authorization: Bearer {token}` 请求头
- 401 状态码自动清除 Token 并跳转登录

### 4.2 管理员后台 (admin.html)

#### 4.2.1 页面布局

```
┌──────────────────────────────────────────────────────┐
│                    Header (顶部)                      │
│         通知铃铛 │ 系统设置 │ 日期显示               │
├────────────┬─────────────────────────────────────────┤
│            │                                         │
│  Sidebar   │            Main Content                 │
│  (侧边栏)   │            (主内容区)                   │
│            │                                         │
│ - 控制台    │    ┌─────────────────────────────┐     │
│ - 图书管理  │    │        Dashboard            │     │
│ - 借阅记录  │    │    或其他功能模块            │     │
│ - 评论管理  │    └─────────────────────────────┘     │
│ - 人员管理  │                                         │
│            │                                         │
├────────────┴─────────────────────────────────────────┤
│              User Info (底部用户信息)                 │
└──────────────────────────────────────────────────────┘
```

#### 4.2.2 功能模块

| 模块 | 路由 | 功能描述 | 权限 |
|------|------|---------|------|
| 控制台 | /dashboard | 统计概览、最新入库 | 所有管理员 |
| 图书管理 | /books | 图书CRUD、封面上传 | 所有管理员 |
| 借阅记录 | /borrows | 查看记录、强制归还 | 所有管理员 |
| 评论管理 | /reviews | 评论审核、删除 | 超级/普通管理员 |
| 人员管理 | /admins | 管理员账号管理 | 仅超级管理员 |

#### 4.2.3 核心功能实现

**1. Dashboard - 控制台仪表盘**
```javascript
统计卡片：
- 馆藏种类（图书总数）
- 图书总库存
- 当前借出数量
- 社区评论数

功能区：
- 最新入库图书表格
- 系统公告/角色说明
```

**2. BookManager - 图书管理**
```javascript
功能清单：
- 图书列表展示（带封面缩略图）
- 分类筛选 + 关键词搜索
- 新增图书表单（支持封面上传）
- 编辑图书信息
- 删除图书（确认提示）

表单字段：
- 书名、作者、分类（级联选择）
- ISBN、封面URL/上传
- 价格、库存、简介
```

**3. BorrowManager - 借阅管理**
```javascript
功能：
- 所有借阅记录表格
- 显示订单号、图书、用户、日期
- 借阅状态标签
- 强制归还按钮（借阅中状态）
```

**4. AdminManager - 人员管理**
```javascript
功能：
- 管理员列表展示
- 新增管理员（用户名、密码、角色）
- 删除管理员（保护当前登录用户和初始admin）
```

#### 4.2.4 权限控制

```javascript
// 路由守卫
router.beforeEach((to, from, next) => {
    // 未登录 → 跳转登录页
    // 无权限 → 跳转控制台 + 提示
})

// 菜单动态渲染
store.hasPermission(['超级管理员']) → 显示人员管理菜单
store.hasPermission(['超级管理员', '普通管理员']) → 显示评论管理菜单
```

---

## 五、数据库设计

### 5.1 E-R 图

```
┌─────────────┐         ┌─────────────┐
│    User     │         │   Category  │
├─────────────┤         ├─────────────┤
│ id (PK)     │         │ id (PK)     │
│ username    │         │ name        │
│ password    │         │ parent_id   │
│ role        │         └──────┬──────┘
│ status      │                │
└──────┬──────┘                │ 1:N
       │                       │
       │ 1:N            ┌──────┴──────┐
       │                │    Book     │
       │                ├─────────────┤
       │                │ id (PK)     │
       │                │ title       │
       │                │ author      │
       │                │ category_id │
       │                │ total_count │
       │                │ available   │
       │                └──────┬──────┘
       │                       │
       ├─────────────┬─────────┘
       │             │ 1:N
       │ 1:N         │
┌──────┴─────────────┴──────┐
│    BorrowRecord           │
├───────────────────────────┤
│ id (PK)                   │
│ user_id (FK)              │
│ book_id (FK)              │
│ borrow_date               │
│ due_date                  │
│ return_date               │
│ status                    │
└───────────────────────────┘

┌──────────────────────────────────────┐
│           Favorite (收藏表)           │
├──────────────────────────────────────┤
│ id (PK)                              │
│ user_id (FK) ──────> User            │
│ book_id (FK) ──────> Book            │
│ remark                               │
│ UNIQUE(user_id, book_id)             │
└──────────────────────────────────────┘
```

### 5.2 表结构说明

#### user 表
| 字段 | 类型 | 说明 |
|------|------|------|
| id | BIGINT | 主键，自增 |
| username | VARCHAR(50) | 用户名，唯一 |
| password | VARCHAR(255) | BCrypt加密密码 |
| real_name | VARCHAR(50) | 真实姓名 |
| email | VARCHAR(100) | 邮箱 |
| phone | VARCHAR(20) | 手机号 |
| role | VARCHAR(20) | ADMIN/USER |
| status | INT | 1启用/0禁用 |
| created_at | DATETIME | 创建时间 |
| updated_at | DATETIME | 更新时间 |

#### book 表
| 字段 | 类型 | 说明 |
|------|------|------|
| id | BIGINT | 主键，自增 |
| isbn | VARCHAR(20) | ISBN，唯一 |
| title | VARCHAR(200) | 书名 |
| author | VARCHAR(100) | 作者 |
| publisher | VARCHAR(100) | 出版社 |
| publish_date | DATE | 出版日期 |
| category_id | BIGINT | 分类外键 |
| price | DECIMAL(10,2) | 价格 |
| total_count | INT | 总数量 |
| available_count | INT | 可借数量 |
| description | TEXT | 简介 |
| cover_url | VARCHAR(500) | 封面URL |
| location | VARCHAR(50) | 馆藏位置 |
| status | INT | 状态 |

#### borrow_record 表
| 字段 | 类型 | 说明 |
|------|------|------|
| id | BIGINT | 主键，自增 |
| user_id | BIGINT | 用户外键 |
| book_id | BIGINT | 图书外键 |
| borrow_date | DATETIME | 借阅时间 |
| due_date | DATETIME | 应还时间 |
| return_date | DATETIME | 实际归还时间 |
| status | INT | 0借阅中/1已还/2逾期 |
| remark | VARCHAR(255) | 备注 |

#### favorite 表
| 字段 | 类型 | 说明 |
|------|------|------|
| id | BIGINT | 主键，自增 |
| user_id | BIGINT | 用户外键 |
| book_id | BIGINT | 图书外键 |
| remark | VARCHAR(255) | 收藏备注 |
| created_at | DATETIME | 创建时间 |
| updated_at | DATETIME | 更新时间 |

**约束**：`UNIQUE(user_id, book_id)` 联合唯一约束，防止重复收藏

---

## 六、核心功能流程图

### 6.1 用户登录流程

```
┌─────────┐    ┌──────────────┐    ┌─────────────┐    ┌──────────┐
│  用户    │    │   前端       │    │   后端       │    │  数据库   │
└────┬────┘    └──────┬───────┘    └──────┬──────┘    └────┬─────┘
     │                │                    │                 │
     │ 1.输入账号密码   │                    │                 │
     │───────────────>│                    │                 │
     │                │ 2.POST /auth/login │                 │
     │                │───────────────────>│                 │
     │                │                    │ 3.查询用户       │
     │                │                    │────────────────>│
     │                │                    │<────────────────│
     │                │                    │ 4.验证密码       │
     │                │                    │ 5.生成JWT       │
     │                │<───────────────────│                 │
     │                │   返回Token+用户    │                 │
     │ 6.存储Token    │                    │                 │
     │<───────────────│                    │                 │
     │  跳转首页       │                    │                 │
```

### 6.2 图书借阅流程

```
┌─────────┐    ┌──────────────┐    ┌─────────────┐    ┌──────────┐
│  用户    │    │   前端       │    │   后端       │    │  数据库   │
└────┬────┘    └──────┬───────┘    └──────┬──────┘    └────┬─────┘
     │                │                    │                 │
     │ 1.点击借阅      │                    │                 │
     │───────────────>│                    │                 │
     │                │ 2.POST /borrows    │                 │
     │                │  {bookId, days}    │                 │
     │                │───────────────────>│                 │
     │                │                    │ 3.检查借阅限制   │
     │                │                    │────────────────>│
     │                │                    │ 4.检查库存       │
     │                │                    │────────────────>│
     │                │                    │ 5.检查重复借阅   │
     │                │                    │────────────────>│
     │                │                    │ 6.扣减库存       │
     │                │                    │────────────────>│
     │                │                    │ 7.创建借阅记录   │
     │                │                    │────────────────>│
     │                │<───────────────────│                 │
     │ 8.借阅成功提示  │   返回借阅信息     │                 │
     │<───────────────│                    │                 │
```

---

## 七、项目亮点与创新

### 7.1 技术亮点

1. **前后端完全分离**
   - 前端纯静态 HTML，可部署到任意 Web 服务器
   - 后端提供 RESTful API，支持多端接入

2. **JWT 无状态认证**
   - 服务端无需存储会话
   - 支持分布式部署
   - Token 自动过期机制

3. **响应式 UI 设计**
   - Tailwind CSS 实现响应式布局
   - 支持 PC 和移动端适配
   - 现代化的玻璃态 UI 风格

4. **完善的权限控制**
   - 前端路由守卫 + 菜单动态渲染
   - 后端 @PreAuthorize 注解验证
   - 多角色权限分离

### 7.2 业务创新

1. **借阅限额管理**
   - 可配置最大借阅数量
   - 防止同一本书重复借阅

2. **自动逾期检测**
   - 定时任务每日扫描
   - 自动标记逾期记录

3. **读者社区功能**
   - 书评发布与互动
   - 本地存储评论数据

4. **图书收藏系统**
   - 支持用户收藏喜爱图书
   - 可添加收藏备注分类管理
   - 联合唯一约束防止重复收藏
   - 支持查询收藏数量统计

5. **数据统计分析**
   - 实时统计图书总数、库存、用户数、借阅数
   - 今日借阅/归还实时统计
   - 借阅趋势分析（近7天折线图数据）
   - 分类统计（饼图数据）
   - 热门图书排行榜 TOP10
   - 活跃用户排行榜 TOP10

6. **文件上传管理**
   - 支持图书封面图片上传
   - 文件类型和大小校验（仅图片，最大5MB）
   - UUID 生成唯一文件名，避免冲突
   - 静态资源映射，支持直接访问

---

## 八、运行部署说明

### 8.1 环境要求

- JDK 17+
- MySQL 8.0+
- Maven 3.6+
- 现代浏览器（Chrome/Firefox/Edge）

### 8.2 后端启动

```bash
# 1. 创建数据库
CREATE DATABASE library_db CHARACTER SET utf8mb4;

# 2. 修改配置文件 application.yml
# - 数据库连接信息
# - JWT 密钥

# 3. 启动项目
cd library-management
mvn spring-boot:run
```

### 8.3 前端访问

- 管理后台：直接浏览器打开 `admin.html`
- 用户前台：直接浏览器打开 `user.html`

### 8.4 默认账号

| 角色 | 用户名 | 密码 |
|------|--------|------|
| 管理员 | admin | admin123 |

---

## 九、总结与展望

### 9.1 项目总结

本项目成功实现了一个功能完整的图书馆管理系统，涵盖：
- 用户认证与授权
- 图书信息管理
- 借阅流程管理
- 多角色权限控制
- 现代化 UI 界面
- 图书收藏功能
- 数据统计分析
- 文件上传管理

采用主流的 Spring Boot + Vue 3 技术栈，代码结构清晰，易于维护和扩展。

### 9.2 未来展望

1. **功能扩展**
   - 预约借书功能
   - 图书推荐算法
   - 消息通知系统

2. **技术升级**
   - Redis 缓存优化
   - 全文搜索（Elasticsearch）
   - 微服务拆分

3. **运营支持**
   - 数据统计报表
   - 导出 Excel 功能
   - 移动端 App

---

## 附录：API 接口文档摘要

### 认证模块
```
POST /api/auth/login      - 登录
POST /api/auth/register   - 注册
GET  /api/auth/me         - 获取当前用户
```

### 图书模块
```
GET    /api/books         - 图书列表（分页）
GET    /api/books/{id}    - 图书详情
POST   /api/books         - 新增图书 [管理员]
PUT    /api/books/{id}    - 更新图书 [管理员]
DELETE /api/books/{id}    - 删除图书 [管理员]
```

### 分类模块
```
GET    /api/categories       - 分类列表
GET    /api/categories/tree  - 分类树
POST   /api/categories       - 新增分类 [管理员]
```

### 借阅模块
```
POST /api/borrows            - 借书
POST /api/borrows/{id}/return - 还书
GET  /api/borrows            - 借阅记录列表 [管理员]
GET  /api/borrows/my         - 我的借阅记录
```

### 收藏模块
```
POST   /api/favorites/{bookId}       - 添加收藏（可附备注）
DELETE /api/favorites/{bookId}       - 取消收藏
GET    /api/favorites                - 我的收藏列表（分页）
GET    /api/favorites/check/{bookId} - 检查是否已收藏
GET    /api/favorites/count/{bookId} - 获取图书收藏人数
```

### 统计模块
```
GET /api/statistics           - 获取统计数据 [管理员]
GET /api/statistics/dashboard - 获取仪表盘数据 [管理员]
```

**返回数据**：
- 基础统计：totalBooks, totalStock, totalUsers, totalBorrows
- 借阅统计：activeBorrows, overdueBorrows, todayBorrows, todayReturns
- 图表数据：borrowTrend[], categoryStats[], hotBooks[], activeUsers[]

### 文件模块
```
POST /api/files/upload - 上传图书封面图片
```

**请求格式**：`multipart/form-data`
**参数**：`file` - 图片文件（最大5MB）
**返回**：`{ url: "访问地址", filename: "文件名" }`

---

**报告完成日期**: 2025年12月

**项目作者**: _____________________

**指导教师**: _____________________
